# BLACKSKY-MD Premium Heroku Configuration
# Optimized for 24/7 operation with enhanced monitoring and error recovery

# Build settings
build:
  docker:
    worker: Dockerfile
    web: Dockerfile  # Added web process for health monitoring

# Setup scripts and addons
setup:
  addons:
    - plan: heroku-postgresql:mini
      as: DATABASE
  config:
    NODE_ENV: production
    SESSION_ID: BLACKSKY-MD
    ENABLE_HEALTH_CHECK: true
    TZ: UTC  # Set timezone, change if needed 

# Process execution
run:
  worker: 
    command: pm2-runtime ecosystem.config.js --env production
    image: worker
  web:
    command: npm start
    image: web
